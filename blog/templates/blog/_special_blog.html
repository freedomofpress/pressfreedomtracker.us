{% load wagtailcore_tags wagtailimages_tags %}

{% if page.lead_graphic.0.block_type == "vertical_bar_chart" %}
	<div class="special-blog__hero-bg padded">
		{% include 'common/blocks/vertical_bar_chart.html' with value=page.lead_graphic.0.value static_graphic=true %}
	</div>
{% elif page.lead_graphic.0.block_type == "tree_map_chart" %}
	<div class="special-blog__hero-bg padded">
		{% include 'common/blocks/tree_map_chart.html' with value=page.lead_graphic.0.value static_graphic=true %}
	</div>
{% elif page.lead_graphic.0.block_type == "bubble_map_chart" %}
	<div class="special-blog__hero-bg padded">
		{% include 'common/blocks/bubble_map_chart.html' with value=page.lead_graphic.0.value static_graphic=true %}
	</div>
{% else %}
	{% image page.lead_graphic.0.value scale-100 as tmp_photo %}
	<div class="special-blog__hero-bg" style="background-image: url('{{ tmp_photo.url }}')">
		<span class="sr-only">Background hero image of {{ page.lead_graphic.0.title }}</span>
	</div>
{% endif %}

<div class="special-blog__hero">
	<h1 class="special-blog__hero-title article-title" id="title">{{ page.title }}</h1>

	<div class="special-blog__hero-text">
		{% if page.publication_datetime %}
			<p class="special-blog__hero-meta">
				<span class="special-blog__hero-date">{{ page.publication_datetime|date:"F j, Y" }}</span>
				{% if page.author %}
					<span class="special-blog__hero-author"> â€” {{ page.author }}</span>
				{% endif %}
			</p>
		{% endif %}
		{% if page.lead_graphic.0.attribution %}
			<p class="special-blog__hero-citation">
				{{ page.lead_graphic.0.attribution }}
			</p>
		{% endif %}
	</div>
</div>

<article class="article-content">

	{% if page.introduction %}
			<p class="heading">{{ page.introduction }}</p>
	{% endif %}

	<section class="article-content__inner">
		{% for block in page.body %}
			<div class="article-content__block">{% include_block block %}</div>
		{% endfor %}
	</section>
</article>
<div class="article-actions">
	<a href="{% pageurl page.get_parent %}" class="btn btn-primary">Return to Blog</a>
</div>
